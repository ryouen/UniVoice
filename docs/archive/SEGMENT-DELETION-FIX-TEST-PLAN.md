# セグメント削除修正テスト計画

## 実施日時
2025-08-24

## テスト概要
RealtimeDisplayManager.tsのセグメント削除ロジック修正後の動作確認

## テスト項目

### 1. 基本動作確認
- [ ] アプリケーションが正常に起動すること
- [ ] 音声認識を開始できること
- [ ] リアルタイム文字起こしが表示されること
- [ ] 翻訳が表示されること

### 2. セグメント削除の安全性確認
- [ ] activeセグメントが削除されないこと
- [ ] fadingセグメントが削除されないこと
- [ ] completedセグメントのみが削除されること
- [ ] 最小表示時間（1.5秒）が守られること
- [ ] 翻訳表示後1.5秒は削除されないこと

### 3. 3行表示の安定性確認
- [ ] 常に最大3行が維持されること
- [ ] 表示の飛びや点滅がないこと
- [ ] 原文と翻訳の対応が崩れないこと
- [ ] フェードイン/アウトが滑らかに動作すること

### 4. 一時停止/再開機能の確認
- [ ] 一時停止ボタンが機能すること
- [ ] 再開ボタンで正常に再開すること
- [ ] 「一時停止中」の状態から抜け出せること

### 5. ログ確認項目
- [ ] [DisplayManager]のログで削除動作を確認
- [ ] pruneSegmentsの実行タイミングを確認
- [ ] エラーログがないことを確認

## 確認方法

### コンソールログの監視
```javascript
// RealtimeDisplayManager内のログ出力
console.log('[DisplayManager] Pruning segments:', {
  totalSegments: this.segments.length,
  completedCount: removableIdxs.length,
  toRemove: canRemoveIdxs.length
});
```

### デバッグ用の表示確認
1. DevTools（F12）を開く
2. Consoleタブでログを監視
3. Networkタブで翻訳リクエストを確認
4. ElementsタブでDOM構造を確認

## 期待される結果
1. 3行表示が安定して維持される
2. 翻訳が表示されてから1.5秒は削除されない
3. activeとfadingは絶対に削除されない
4. 一時停止/再開が正常に機能する

## 問題が発生した場合
1. ログを収集
2. 画面のスクリーンショットを撮影
3. 再現手順を記録
4. バックアップから復元可能