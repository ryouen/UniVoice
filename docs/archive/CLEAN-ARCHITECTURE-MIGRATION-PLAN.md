# UniVoice 2.0 Clean Architecture ç§»è¡Œè¨ˆç”»æ›¸

## ğŸ“‹ ç›®æ¬¡
1. [ç¾çŠ¶åˆ†æ](#ç¾çŠ¶åˆ†æ)
2. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ)
3. [ç§»è¡Œæˆ¦ç•¥](#ç§»è¡Œæˆ¦ç•¥)
4. [ãƒªã‚¹ã‚¯ç®¡ç†](#ãƒªã‚¹ã‚¯ç®¡ç†)
5. [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
6. [å®Ÿè£…è¨ˆç”»](#å®Ÿè£…è¨ˆç”»)

## ğŸ” ç¾çŠ¶åˆ†æ

### ç¾åœ¨ã®å•é¡Œç‚¹

#### 1. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¨è²¬ä»»ã®æ··åœ¨**
```
UniVoicePerfect.tsx (1800è¡Œ+)
â”œâ”€â”€ UIè¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ çŠ¶æ…‹ç®¡ç†ï¼ˆ20å€‹ä»¥ä¸Šã®useStateï¼‰
â”œâ”€â”€ ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
â”œâ”€â”€ ãƒªã‚µã‚¤ã‚ºå‡¦ç†
â”œâ”€â”€ ãƒ¢ãƒ¼ãƒ€ãƒ«ç®¡ç†
â”œâ”€â”€ è‡ªå‹•ä¿å­˜
â”œâ”€â”€ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
â”œâ”€â”€ ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
â”œâ”€â”€ ã‚¿ã‚¤ãƒãƒ¼ç®¡ç†
â”œâ”€â”€ ãƒ¡ãƒ¢æ©Ÿèƒ½
â””â”€â”€ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
```

#### 2. **å¯†çµåˆã®å•é¡Œ**
- UIã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãŒå¯†çµåˆ
- ã‚¤ãƒ™ãƒ³ãƒˆåãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
- è¦ªãƒ•ã‚©ãƒ«ãƒ€ã¸ã®æš—é»™çš„ãªä¾å­˜
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªwindowã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹

#### 3. **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£ã®æ¬ å¦‚**
- å·¨å¤§ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ãƒ†ã‚¹ãƒˆãŒå›°é›£
- ãƒ¢ãƒƒã‚¯ãŒä½œã‚Šã«ãã„
- å‰¯ä½œç”¨ãŒå¤šã„

### æ—¢å­˜ã®å‹•ä½œã—ã¦ã„ã‚‹æ©Ÿèƒ½ï¼ˆçµ¶å¯¾ã«å£Šã•ãªã„ï¼‰

1. **ã‚³ã‚¢æ©Ÿèƒ½**
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°èªè­˜è¡¨ç¤º âœ…
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç¿»è¨³è¡¨ç¤º âœ…
   - å±¥æ­´ã¸ã®ä¿å­˜ âœ…
   - 3è¡Œè¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ  âœ…

2. **é«˜åº¦ãªæ©Ÿèƒ½**
   - å®šæœŸè¦ç´„ç”Ÿæˆ âš ï¸ï¼ˆæœªå®Œå…¨å®Ÿè£…ï¼‰
   - èªå½™æŠ½å‡º âš ï¸ï¼ˆæœªå®Œå…¨å®Ÿè£…ï¼‰
   - æœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆ âš ï¸ï¼ˆæœªå®Œå…¨å®Ÿè£…ï¼‰
   - å±¥æ­´ã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ– ğŸ”´ï¼ˆèª²é¡Œï¼‰

3. **UIæ©Ÿèƒ½**
   - ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒªã‚µã‚¤ã‚º
   - ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
   - è‡ªå‹•ä¿å­˜
   - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                    â”‚
â”‚  - React Components (View)                              â”‚
â”‚  - Custom Hooks (Presenter)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Application Layer                       â”‚
â”‚  - Use Cases                                           â”‚
â”‚  - Application Services                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Domain Layer                          â”‚
â”‚  - Entities                                            â”‚
â”‚  - Domain Services                                     â”‚
â”‚  - Domain Events                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Infrastructure Layer                      â”‚
â”‚  - External APIs (OpenAI, Deepgram)                   â”‚
â”‚  - IPC Communication                                   â”‚
â”‚  - Local Storage                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
UniVoice/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ presentation/          # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â”œâ”€â”€ components/        # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ UniVoice/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UniVoiceContainer.tsx      (100è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sections/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SetupSection/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SetupSection.tsx   (150è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ClassSelector.tsx  (80è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HistorySection/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HistorySection.tsx  (120è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HistoryBlock.tsx   (80è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RealtimeSection/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RealtimeSection.tsx (150è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ThreeLineDisplay.tsx (100è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SummarySection/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SummarySection.tsx  (100è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ QuestionSection/
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ QuestionSection.tsx (120è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ MemoEditor.tsx      (80è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ controls/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SessionControls.tsx     (100è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ExportControls.tsx      (80è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ VolumeIndicator.tsx     (60è¡Œ)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ modals/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ HistoryModal.tsx        (100è¡Œ)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ VocabularyModal.tsx     (80è¡Œ)
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ReportModal.tsx         (80è¡Œ)
â”‚   â”‚   â”œâ”€â”€ hooks/             # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ usePipeline.ts             (80è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ usePipelineEvents.ts       (100è¡Œ)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ usePipelineState.ts        (60è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useResize.ts               (80è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useKeyboardShortcuts.ts    (60è¡Œ)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAutoSave.ts             (60è¡Œ)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useModal.ts                (40è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ audio/
â”‚   â”‚   â”‚       â”œâ”€â”€ useAudioCapture.ts         (100è¡Œ)
â”‚   â”‚   â”‚       â””â”€â”€ useVolumeLevel.ts          (60è¡Œ)
â”‚   â”œâ”€â”€ application/           # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â”œâ”€â”€ usecases/
â”‚   â”‚   â”‚   â”œâ”€â”€ StartSessionUseCase.ts         (80è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ StopSessionUseCase.ts          (60è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ TranslateTextUseCase.ts        (80è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ GenerateSummaryUseCase.ts      (80è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ ExportDataUseCase.ts           (100è¡Œ)
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”œâ”€â”€ SessionService.ts              (100è¡Œ)
â”‚   â”‚       â”œâ”€â”€ HistoryService.ts              (100è¡Œ)
â”‚   â”‚       â””â”€â”€ StorageService.ts              (80è¡Œ)
â”‚   â”œâ”€â”€ domain/                # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
â”‚   â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”‚   â”œâ”€â”€ Session.ts                     (60è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ Translation.ts                 (40è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ Summary.ts                     (40è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ HistoryEntry.ts                (40è¡Œ)
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ TranslationService.ts          (80è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ SummaryService.ts              (80è¡Œ)
â”‚   â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”‚   â”œâ”€â”€ DomainEvent.ts                 (40è¡Œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionEvents.ts               (60è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ TranslationEvents.ts           (60è¡Œ)
â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚       â”œâ”€â”€ ISessionRepository.ts          (40è¡Œ)
â”‚   â”‚       â””â”€â”€ IHistoryRepository.ts          (40è¡Œ)
â”‚   â”œâ”€â”€ infrastructure/        # ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ ElectronIPCAdapter.ts          (100è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ WindowAPIAdapter.ts            (80è¡Œ)
â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”œâ”€â”€ LocalStorageAdapter.ts         (80è¡Œ)
â”‚   â”‚   â”‚   â””â”€â”€ IndexedDBAdapter.ts            (100è¡Œ)
â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚       â”œâ”€â”€ SessionRepository.ts           (100è¡Œ)
â”‚   â”‚       â””â”€â”€ HistoryRepository.ts           (100è¡Œ)
â”‚   â””â”€â”€ shared/                # å…±æœ‰
â”‚       â”œâ”€â”€ constants/
â”‚       â”‚   â”œâ”€â”€ events.ts                      (80è¡Œ)
â”‚       â”‚   â””â”€â”€ config.ts                      (40è¡Œ)
â”‚       â”œâ”€â”€ types/
â”‚       â”‚   â””â”€â”€ contracts.ts                   (100è¡Œ)
â”‚       â””â”€â”€ utils/
â”‚           â”œâ”€â”€ EventBus.ts                    (80è¡Œ)
â”‚           â””â”€â”€ Logger.ts                      (60è¡Œ)
```

## ğŸ”„ ç§»è¡Œæˆ¦ç•¥

### Phase 0: æº–å‚™ï¼ˆ1æ—¥ï¼‰

1. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ–ãƒ©ãƒ³ãƒã®ä½œæˆ**
   ```bash
   git checkout -b backup/before-clean-architecture
   git push origin backup/before-clean-architecture
   ```

2. **ç¾çŠ¶ã®E2Eãƒ†ã‚¹ãƒˆä½œæˆ**
   ```typescript
   // tests/e2e/current-functionality.test.ts
   describe('ç¾åœ¨ã®æ©Ÿèƒ½', () => {
     test('ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°èªè­˜ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async () => {
       // å®Ÿè£…
     });
     test('ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç¿»è¨³ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async () => {
       // å®Ÿè£…
     });
     test('å±¥æ­´ã«ä¿å­˜ã•ã‚Œã‚‹', async () => {
       // å®Ÿè£…
     });
   });
   ```

3. **èª²é¡Œè¨˜éŒ²ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**
   ```markdown
   # docs/MIGRATION-ISSUES.md
   - ç™ºè¦‹ã—ãŸèª²é¡Œã‚’éšæ™‚è¨˜éŒ²
   ```

### Phase 1: å…±é€šåŸºç›¤ã®æ§‹ç¯‰ï¼ˆ2æ—¥ï¼‰

1. **ã‚¤ãƒ™ãƒ³ãƒˆå®šæ•°ã®ä¸€å…ƒåŒ–**
   ```typescript
   // src/shared/constants/events.ts
   export const PIPELINE_EVENTS = {
     CURRENT_ORIGINAL_UPDATE: 'current-original-update',
     CURRENT_TRANSLATION_UPDATE: 'current-translation-update',
     TRANSLATION_COMPLETE: 'translation-complete',
     // ... å…¨ã‚¤ãƒ™ãƒ³ãƒˆã‚’å®šç¾©
   } as const;
   ```

2. **å‹å®‰å…¨ãªEventBusã®å®Ÿè£…**
   ```typescript
   // src/shared/utils/EventBus.ts
   export class TypedEventBus<TEvents extends Record<string, any>> {
     // å®Ÿè£…
   }
   ```

3. **ä¾å­˜æ€§æ³¨å…¥ã‚³ãƒ³ãƒ†ãƒŠã®æº–å‚™**
   ```typescript
   // src/shared/di/container.ts
   export class DIContainer {
     // å®Ÿè£…
   }
   ```

### Phase 2: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ†å‰²ï¼ˆ3æ—¥ï¼‰

1. **UniVoicePerfect.tsxã®åˆ†æ**
   - è²¬ä»»ã®è­˜åˆ¥
   - çŠ¶æ…‹ã®åˆ†é¡
   - ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã®æ•´ç†

2. **æ®µéšçš„ãªæŠ½å‡º**
   ```bash
   # Step 1: SetupSectionã‚’æŠ½å‡º
   git checkout -b refactor/extract-setup-section
   # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
   npm test
   # ã‚³ãƒŸãƒƒãƒˆ
   git commit -m "refactor: extract SetupSection component"
   ```

3. **å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æŠ½å‡ºé †åº**
   1. SetupSectionï¼ˆç‹¬ç«‹æ€§ãŒé«˜ã„ï¼‰
   2. RealtimeSectionï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰
   3. HistorySectionï¼ˆèª²é¡Œã‚ã‚Šã€æ…é‡ã«ï¼‰
   4. SummarySection
   5. QuestionSection

### Phase 3: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®åˆ†å‰²ï¼ˆ2æ—¥ï¼‰

1. **useUnifiedPipelineã®åˆ†æ**
   - ã‚³ã‚¢æ©Ÿèƒ½ã®è­˜åˆ¥
   - ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®åˆ†é›¢
   - éŸ³å£°å‡¦ç†ã®åˆ†é›¢

2. **æ®µéšçš„ãªæŠ½å‡º**
   ```typescript
   // Step 1: ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã‚’åˆ†é›¢
   // src/presentation/hooks/core/usePipelineEvents.ts
   export const usePipelineEvents = () => {
     // ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®ã¿
   };
   ```

### Phase 4: ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã®æ§‹ç¯‰ï¼ˆ3æ—¥ï¼‰

1. **ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®å®šç¾©**
   ```typescript
   // src/domain/entities/Translation.ts
   export class Translation {
     constructor(
       public readonly id: string,
       public readonly original: string,
       public readonly translated: string,
       public readonly timestamp: number
     ) {}
   }
   ```

2. **ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè£…**
   ```typescript
   // src/domain/services/TranslationService.ts
   export class TranslationService {
     // ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿
   }
   ```

### Phase 5: ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£å±¤ã®æ§‹ç¯‰ï¼ˆ2æ—¥ï¼‰

1. **ã‚¢ãƒ€ãƒ—ã‚¿ã®å®Ÿè£…**
   ```typescript
   // src/infrastructure/api/ElectronIPCAdapter.ts
   export class ElectronIPCAdapter implements IPipelineAPI {
     // IPCé€šä¿¡ã®å®Ÿè£…
   }
   ```

2. **ãƒªãƒã‚¸ãƒˆãƒªã®å®Ÿè£…**
   ```typescript
   // src/infrastructure/repositories/HistoryRepository.ts
   export class HistoryRepository implements IHistoryRepository {
     // æ°¸ç¶šåŒ–ã®å®Ÿè£…
   }
   ```

## ğŸ›¡ï¸ ãƒªã‚¹ã‚¯ç®¡ç†

### ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | ç™ºç”Ÿç¢ºç‡ | å¯¾ç­– |
|--------|--------|----------|------|
| æ—¢å­˜æ©Ÿèƒ½ã®ç ´å£Š | é«˜ | ä¸­ | æ®µéšçš„ç§»è¡Œã€E2Eãƒ†ã‚¹ãƒˆ |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ– | ä¸­ | ä½ | ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã€æœ€é©åŒ– |
| è¤‡é›‘æ€§ã®å¢—åŠ  | ä¸­ | ä¸­ | ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­è¨ˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ |
| é–‹ç™ºæœŸé–“ã®å»¶é•· | ä¸­ | é«˜ | å„ªå…ˆé †ä½ä»˜ã‘ã€æ®µéšçš„ãƒªãƒªãƒ¼ã‚¹ |

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥

1. **Gitãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥**
   ```
   main
   â”œâ”€â”€ backup/before-clean-architecture
   â”œâ”€â”€ refactor/phase-1-common
   â”œâ”€â”€ refactor/phase-2-ui
   â”œâ”€â”€ refactor/phase-3-hooks
   â”œâ”€â”€ refactor/phase-4-domain
   â””â”€â”€ refactor/phase-5-infra
   ```

2. **ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †**
   - å„ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†æ™‚ã«ã‚¿ã‚°ä»˜ã‘
   - å•é¡Œç™ºç”Ÿæ™‚ã¯å‰ã®ã‚¿ã‚°ã«æˆ»ã‚‹
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯åˆ¥ç®¡ç†

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰

```
         /\
        /  \  E2E Tests (10%)
       /____\
      /      \  Integration Tests (30%)
     /________\
    /          \  Unit Tests (60%)
   /____________\
```

### ãƒ†ã‚¹ãƒˆã®ç¨®é¡ã¨ç›®çš„

1. **å˜ä½“ãƒ†ã‚¹ãƒˆ**
   - å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ©Ÿèƒ½ã‚’æ¤œè¨¼
   - ãƒ¢ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ç‹¬ç«‹æ€§ã‚’ä¿ã¤
   - å®Ÿè¡Œæ™‚é–“: < 10ç§’

2. **çµ±åˆãƒ†ã‚¹ãƒˆ**
   - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®é€£æºã‚’æ¤œè¨¼
   - å®Ÿéš›ã®APIã¯ä½¿ã‚ãªã„
   - å®Ÿè¡Œæ™‚é–“: < 1åˆ†

3. **E2Eãƒ†ã‚¹ãƒˆ**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªã‚’æ¤œè¨¼
   - å®Ÿéš›ã®ç’°å¢ƒã§å®Ÿè¡Œ
   - å®Ÿè¡Œæ™‚é–“: < 5åˆ†

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°

- **ã‚³ãƒŸãƒƒãƒˆæ™‚**: å˜ä½“ãƒ†ã‚¹ãƒˆ
- **PRä½œæˆæ™‚**: å˜ä½“ãƒ†ã‚¹ãƒˆ + çµ±åˆãƒ†ã‚¹ãƒˆ
- **ãƒãƒ¼ã‚¸å‰**: å…¨ãƒ†ã‚¹ãƒˆ

## ğŸ“… å®Ÿè£…è¨ˆç”»

### ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆåˆè¨ˆ: ç´„2é€±é–“ï¼‰

```mermaid
gantt
    title Clean Architectureç§»è¡Œè¨ˆç”»
    dateFormat  YYYY-MM-DD
    section Phase 0
    æº–å‚™ä½œæ¥­           :2024-08-23, 1d
    section Phase 1
    å…±é€šåŸºç›¤æ§‹ç¯‰       :2024-08-24, 2d
    section Phase 2
    UIåˆ†å‰²             :2024-08-26, 3d
    section Phase 3
    ãƒ•ãƒƒã‚¯åˆ†å‰²         :2024-08-29, 2d
    section Phase 4
    ãƒ‰ãƒ¡ã‚¤ãƒ³æ§‹ç¯‰       :2024-08-31, 3d
    section Phase 5
    ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰       :2024-09-03, 2d
    section å®Œäº†
    çµ±åˆãƒ†ã‚¹ãƒˆ         :2024-09-05, 1d
```

### ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

1. **M1**: å…±é€šåŸºç›¤å®Œæˆï¼ˆDay 3ï¼‰
2. **M2**: UIåˆ†å‰²å®Œäº†ï¼ˆDay 6ï¼‰
3. **M3**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯åˆ†é›¢ï¼ˆDay 11ï¼‰
4. **M4**: å…¨ä½“çµ±åˆå®Œäº†ï¼ˆDay 14ï¼‰

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

1. **ã‚³ãƒ¼ãƒ‰å“è³ª**
   - å„ãƒ•ã‚¡ã‚¤ãƒ«200è¡Œä»¥ä¸‹
   - å¾ªç’°ä¾å­˜ã‚¼ãƒ­
   - ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š

2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - åˆæœŸè¡¨ç¤ºæ™‚é–“: å¤‰åŒ–ãªã—
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: 10%ä»¥ä¸‹ã®å¢—åŠ 

3. **ä¿å®ˆæ€§**
   - æ–°æ©Ÿèƒ½è¿½åŠ æ™‚é–“: 50%å‰Šæ¸›
   - ãƒã‚°ä¿®æ­£æ™‚é–“: 30%å‰Šæ¸›

## ğŸš¦ é–‹å§‹æ¡ä»¶

1. ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã®æ‰¿èª
2. ç¾åœ¨ã®æ©Ÿèƒ½ã®å®Œå…¨ãªå‹•ä½œç¢ºèª
3. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ä½œæˆ
4. E2Eãƒ†ã‚¹ãƒˆã®æº–å‚™

## ğŸ“ æ³¨æ„äº‹é …

1. **å±¥æ­´ã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–å•é¡Œ**ã¯ä¸€æ—¦ä¿ç•™
2. **è¦ªãƒ•ã‚©ãƒ«ãƒ€ã¨ã®äº’æ›æ€§**ã¯ç¶­æŒ
3. **æ®µéšçš„ãªç§»è¡Œ**ã‚’å¾¹åº•
4. **æ¯æ—¥ã®é€²æ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ã‚’å®Ÿæ–½

---

æœ€çµ‚æ›´æ–°: 2024-08-22
ä½œæˆè€…: Claude (Ultrathink)
ãƒ¬ãƒ“ãƒ¥ãƒ¼: æœªå®Ÿæ–½