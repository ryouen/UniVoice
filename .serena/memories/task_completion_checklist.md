# タスク完了時のチェックリスト

## 🔴 必須確認事項（全タスク共通）

### 1. 型チェック
```bash
npm run typecheck
```
- エラーが0件であることを確認
- any型を使用していないことを確認

### 2. ビルド成功確認
```bash
npm run build
```
- ビルドが正常に完了することを確認
- 警告が最小限であることを確認

### 3. テスト実行
```bash
npm test
```
- 全てのテストがパスすることを確認
- 新機能の場合は対応するテストを追加

### 4. 動作確認
```bash
npm run dev     # ターミナル1
npm run electron # ターミナル2
```
- 実際にアプリケーションを起動して動作確認
- エラーがコンソールに出ていないことを確認

## 📊 パフォーマンス関連タスクの場合

### メトリクス計測
```bash
node tests/core/test-metrics.js  # 存在する場合
```
- first paint ≤ 1000ms
- complete ≤ 2000ms
- 要約 ≤ 3000ms
- レポート ≤ 15000ms

### 計測結果の記録
- 変更前後の数値を記録
- 改善率を計算して報告

## 🎨 UI関連タスクの場合

### 視覚的確認
- Chrome DevToolsでレスポンシブ確認
- アニメーションの滑らかさ確認
- 色のコントラスト確認（アクセシビリティ）

### コンソールエラー確認
- ブラウザコンソールにエラーがないこと
- React警告がないこと
- メモリリークの兆候がないこと

## 📝 ドキュメント更新

### 変更内容に応じて更新
- START-HERE.md（重要な変更の場合）
- docs/ACTIVE/CODE-CHANGES.md（コード変更記録）
- 関連する仕様書（機能追加・変更の場合）

### コメントの確認
- 複雑なロジックには適切なコメント
- 型定義にJSDocコメント（必要に応じて）

## 🔒 セキュリティチェック

### APIキー確認
- ハードコーディングされていないこと
- .envからのみ読み込まれていること

### エラーメッセージ
- センシティブな情報が含まれていないこと
- スタックトレースが本番環境で表示されないこと

## 🚀 コミット前の最終確認

### コード品質
- 不要なconsole.logが削除されている
- デバッグコードが削除されている
- TODOコメントが適切に処理されている

### Gitステータス
```bash
git status
git diff
```
- 意図しないファイルが含まれていないこと
- .envファイルがコミットに含まれていないこと

### コミットメッセージ
- Conventional Commits形式に従っている
- 変更内容を正確に表現している
- 例：
  - feat: 段階的要約機能の実装
  - fix: 翻訳遅延の解消
  - perf: StreamCoalescerによるUI更新最適化

## ⚠️ 特に注意すべき点

### 親フォルダ参照
- ../realtime_transtratorへの参照が含まれていないこと
- 必要なコードはUniVoice内にコピーされていること

### API呼び出し
- Responses API（responses.create）を使用していること
- chat.completions.createに「改悪」していないこと
- GPT-5モデルを正しく指定していること

### 型の重複定義
- DisplaySegment等の型が重複定義されていないこと
- 必ず元のファイルからインポートしていること

## 📋 報告テンプレート

```markdown
## 完了したタスク
[タスクの簡潔な説明]

## 変更内容
- [変更点1]
- [変更点2]

## テスト結果
- TypeScript型チェック: ✅ パス
- ビルド: ✅ 成功
- テスト: ✅ 全てパス
- 動作確認: ✅ 正常動作

## パフォーマンス（該当する場合）
- first paint: XXXms → YYYms（改善率: ZZ%）
- その他の指標...

## 特記事項
[あれば記載]
```